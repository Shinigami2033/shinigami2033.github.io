<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bestellung – Mondschein Konditorei</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Floating Zurück Button -->
  <a href="index.html" class="cta-button floating-cta">
    Startseite
  </a>
  <div class="page-wrapper">

  <main class="page form-page">
    <div class="container">

      <h1>Jetzt bestellen</h1>
      <p>
        Erzähle mir von deiner Wunschkreation –  
        ich melde mich persönlich bei dir zurück.
      </p>

      <!-- Submify Formular -->
      <form action="https://submify.vercel.app/maxschulze1214@hotmail.de"
            method="POST"
            enctype="multipart/form-data"
            class="order-form">
        <!-- Web3Forms API Key -->
        <!--  <input type="hidden" name="access_key" value="tly-8icv1jv7soEpmGGJDUpk81YRV6HwJz64">
        -->
        <label> Felder mit * sind Pflichtfelder</label>
        <label>
          *Name
          <input type="text" name="name" required>
        </label>

        <label>
          *E-Mail
          <input type="email" name="email" required>
        </label>

        <label>
          *Produktart
          <select name="product_type" required>
            <option value="" disabled selected>Bitte wählen</option>
            <option value="Torte">Torte</option>
            <option value="Kuchen">Kuchen</option>
            <option value="Cupcakes">Cupcakes</option>
            <option value="Süße Fours">Süße Fours</option>
            <option value="Sonstiges">Sonstiges</option>
          </select>
        </label> 

        <label>
          *Geschmacksrichtung
          <input type="text" name="flavor" required>
        </label>
        
        <label>
          *Größe / Menge
          <input type="text" name="size_quantity" required>
        </label>

        <label>
          *Alkohol
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" name="alcohol" value="Mit Alkohol" required>
              Mit Alkohol
            </label>

            <label class="radio-option">
              <input type="radio" name="alcohol" value="Ohne Alkohol">
              Ohne Alkohol
            </label>
          </div>
        </label>

        <label>
          Besondere Wünsche / Anmerkungen (optional)
          <input type="text" name="special_requests">
        </label>

        <label>
          Budgetvorstellung (optional)
          <input type="text" name="budget">
        </label>  

        <label>
          *Abhol- oder Lieferdatum
          <input type="date" name="pickup_delivery_date" required>
        </label>

        <label>
          Geliefert werden kann in einem Umkreis von 30km um Schwaan in MV.
        </label>

        <label>
          *Telefonnummer
          <input type="tel" name="phone" required>
        </label>

        <label>
          Allergien oder Unverträglichkeiten (optional)
          <input type="text" name="allergies">
        </label>        

        <label>
          Nachricht
          <textarea name="message" rows="5"></textarea>
        </label>

        <label>
          Referenzbild (optional)
          <input
          type="file"
          name="reference_image"
          accept="image/png, image/jpeg, image/jpg, image/gif"
          id="imageUpload">        
        </label>
        <div id="imagePreview" class="image-preview"></div>
        <div id="uploadError" class="upload-error"></div>

        <label> max. 5 MB pro Bild 
          <br>
           max. 1 Bilder</label>
        
        <button type="submit" class="submit-button">
          Anfrage senden
        </button>
        <label>
          Mit dem Absenden dieses Formulars erklärst du dich damit einverstanden, dass deine Daten gemäß unserer <a href="datenschutz.html" target="_blank">Datenschutzerklärung</a> verarbeitet werden。
        </label>
      </form>

    </div>
  </main>
  </div>
  <!-- JavaScript für Scroll-Effekt der CTA -->
<script>
  const cta = document.querySelector('.floating-cta');

  if (cta) {
    window.addEventListener('scroll', () => {
      cta.classList.toggle('scrolled', window.scrollY > 20);
    });
  }
</script>

<!-- JavaScript für Bildvorschau -->
<script>
  const uploadInput = document.getElementById('imageUpload');
  const preview = document.getElementById('imagePreview');
  const errorBox = document.getElementById('uploadError');

  function showError(message) {
    if (errorBox) {
      errorBox.textContent = message;
    }
  }

  function clearError() {
    if (errorBox) {
      errorBox.textContent = '';
    }
  }

  if (uploadInput && preview) {
    uploadInput.addEventListener('change', () => {
      clearError();

      const file = uploadInput.files[0];

      // Preview leeren
      preview.innerHTML = '';

      if (!file) return;

      const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5 MB

      // Dateigröße prüfen
      if (file.size > MAX_FILE_SIZE) {
        showError('Das Bild darf maximal 5 MB groß sein.');
        uploadInput.value = '';
        return;
      }

      // Typ prüfen
      if (!file.type.startsWith('image/')) {
        showError('Bitte nur Bilddateien hochladen.');
        uploadInput.value = '';
        return;
      }

      // Vorschau anzeigen
      const img = document.createElement('img');
      img.src = URL.createObjectURL(file);
      img.style.maxWidth = '300px';
      img.alt = 'Vorschau';

      preview.appendChild(img);
    });
  }
</script>
</script>

</body>
</html>
